% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/adjust_confounders.R
\name{adjust_confounders}
\alias{adjust_confounders}
\title{Adjust Confounders}
\usage{
adjust_confounders(data, confounders, outcome, treatment, method)
}
\arguments{
\item{data}{A data.frame containing the outcome, treatment, and confounders.}

\item{confounders}{A character vector of column names representing confounding variables to adjust for. You can optionally use \code{explore_causal(data, type = "dag")} to automatically suggest potential confounders.}

\item{outcome}{The name of the outcome variable (numeric or 2-level factor).}

\item{treatment}{The name of the treatment variable (numeric or 2-level factor).}

\item{method}{A character string specifying the adjustment method:
\itemize{
\item "regression": residualizes outcome and treatment against confounders
\item "ipw": estimates propensity scores and computes inverse probability weights
\item "pms": performs 1:1 nearest neighbor propensity score matching without replacement
\item "entropy": computes covariate balancing weights using CBPS
}}
}
\value{
A data.frame with additional columns depending on the method:
\itemize{
\item Regression: \if{html}{\out{<outcome>}}_resid and \if{html}{\out{<treatment>}}_resid containing residuals from the regression models
\item IPW: ps (propensity score) and weights
\item PSM: matched dataset containing weights = 1 for all rows and ps (propensity score)
\item Entropy / CBPS: weights column containing covariate balancing weights
}
}
\description{
This function performs automatic confounder adjustment for a binary treatment and an outcome variable using several commonly used methods:
\itemize{
\item Regression Adjustment (residualization)
\item Inverse Probability Weighting (IPW)
\item Propensity Score Matching (PSM)
\item Entropy Balancing / Covariate Balancing Propensity Scores (CBPS)
}
}
\details{
The output is a dataframe with additional columns depending on the method selected, suitable for use in downstream analyses or causal learning workflows.
\itemize{
\item Regression Adjustment: residualizes the outcome and treatment on confounders. For numeric outcomes/treatments, linear regression is used; for 2-level factors, logistic regression is applied. Multiclass factors are not supported.
\item IPW: estimates the probability of receiving treatment given confounders and constructs inverse probability weights for each unit.
\item PSM: performs 1:1 nearest neighbor matching based on propensity scores. Each treated unit is matched to the closest control, and duplicate controls are removed (matching without replacement). All matched units are assigned weights = 1.
\item Entropy / CBPS: uses the CBPS package to generate covariate balancing weights. All units are retained. This method ensures better covariate balance across treatment groups.
}
}
\examples{
\dontrun{
# Automatically find potential confounders using DAG
confounders <-explore_causal(data = data,,outcome = "outcome",treatment = "treatment",type = "dag")

# Regression adjustment
adjusted_df <- adjust_confounders(data = df, confounders = confounders,
outcome = "Y", treatment = "treat", method = "regression")

# IPW adjustment
adjusted_df <- adjust_confounders(data = df, confounders = confounders,
outcome = "Y", treatment = "treat", method = "ipw")

# Propensity score matching
matched_df <- adjust_confounders(data = df, confounders = confounders,
outcome = "Y", treatment = "treat", method = "pms")

# Entropy balancing using CBPS
adjusted_df <- adjust_confounders(data = df, confounders = confounders,
outcome = "Y", treatment = "treat", method = "entropy")
}

}
\seealso{
\code{\link{lm}}, \code{\link{glm}}, \code{\link{CBPS::CBPS}}, \code{\link{explore_causal}}
}
